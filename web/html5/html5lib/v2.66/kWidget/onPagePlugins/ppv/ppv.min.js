function dump(t,e){var i="";e||(e=0);for(var s="",o=0;e+1>o;o++)s+="    ";if("object"==typeof t)for(var a in t){var d=t[a];"object"==typeof d?(i+=s+"'"+a+"' ...\n",i+=dump(d,e+1)):i+=s+"'"+a+"' => \""+d+'"\n'}else i="===>"+t+"<===("+typeof t+")";return i}kWidget.addReadyCallback(function(t){window.kdp=$smh("#"+t).get(0);var e=!1,i="k-clipList-"+t;$smh("#"+i).remove();var s=function(t){return this.init(t)};s.prototype={pluginName:"ppv",init:function(t){this.kdp=t,this.pid=this.getConfig("pid"),blocked||t.addJsListener("freePreviewEnd","freePreviewEndHandler"),livestream||playlist||category||t.addJsListener("playerUpdatePlayhead","playerUpdatePlayheadHandler"),paid&&t.addJsListener("playerPlayed","playerPlayedHandler"),6==media_type&&this.loadCat()},showPurchaseWindow:function(){kdp.sendNotification("doPause");var t,e=this.getConfig("pid"),i=this.getConfig("entryId"),s=this.getConfig("type"),o=this.getConfig("sm_ak");t={pid:e,sm_ak:o,entryId:i,type:s,protocol:protocol,logged_in:is_logged_in},$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_tickets",data:t,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(t){t.success?t.content.success?($smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close purchase-close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4>'+t.content.title+'</h4><div class="clear"></div></div><div class="modal-body"><div id="entry-wrapper"><div id="entry-thumb">'+t.content.thumb+'</div></div><div id="ticket-wrapper">'+t.content.tickets+'</div><div class="clear"></div><div id="entry-desc">'+t.content.desc+'</div><div class="clear"></div></div><div class="modal-footer"><button style="font-size: 12px; width: 140px;" onclick="ppv_obj.login_form(\''+i+'\');" class="btn btn-default" type="button">Already purchased?</button></div>')):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(t.content.content)):($smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html(t.content)),refresh_player=!0})},register_loggin:function(t,e,i,s,o){window.smh_ppv_order.ticket=t,window.smh_ppv_order.entry=e,window.smh_ppv_order.type=i,window.smh_ppv_order.bill_per=s,$smh(".modal-dialog").css("width","620px"),$smh(".modal-content").html('<div class="modal-header"><span style="font-size: 15px;">Please log in first or register an account</span><button aria-label="Close" data-dismiss="modal" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipRegisterLogin();" class="close" type="button"><span aria-hidden="true">x</span></button><div class="clear"></div></div><div class="modal-body"><div id="smh-register-wrapper"><h4 class="modal-title">Register</h4><form id="smh-register-form" action=""><div id="register-table"><div class="register-table-row"><input type="text" name="fname" id="smh-fname" placeholder="First Name" /></div><div class="register-table-row"><input type="text" name="lname" id="smh-lname" placeholder="Last Name" /></div><div class="register-table-row"><input type="text" name="email" id="smh-email" placeholder="Email" /></div><div class="register-table-row"><input type="password" name="registerPass" id="smh-register-pass" placeholder="Password" /></div><div class="register-table-row"><input type="password" name="registerPass2" id="smh-register-pass2" placeholder="Confirm Password" /></div></div></form><div id="register-fail"></div><button type="button" class="btn btn-primary" style="float: right; width: 95px;" onclick="ppv_obj.register(); return false;">Register</button><span style="margin-left: 20px; margin-right: 20px; display: block; height: 20px; width: 20px; float: right;" id="register-loading"></span></div><div id="smh-login-wrapper"><h4 class="modal-title">Login</h4><form id="smh-login-form" style="margin-top: 45px; height: 220px;" action=""><div id="login-fail"></div><div id="ticket-login-table"><div class="ticket-login-table-row"><input type="text" name="username" id="smh-username" placeholder="Email" /></div><div class="ticket-login-table-row"><input type="password" name="pass" id="smh-pass" placeholder="Password" /></div><div class="ticket-login-table-row"><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="login-loading"></span></div></div></div></form><button type="button" class="btn btn-danger" id="signin" style="width: 95px;" onclick="ppv_obj.smhLogin(true); return false;">Login</button><div id="pass_rec" style="float: right; margin-right: 15px; margin-top: 7px;"><a href="#" onclick="ppv_obj.smh_register_login_password_form('+t+","+e+",'"+i+"','"+s+"','"+o+'\'); return false;">Forgot Password?</a></div><div class="clear"></div></div><div class="clear"></div></div><div class="modal-footer"><button type="button" class="btn btn-default" style="float: left;" onclick="ppv_obj.smh_back(\''+o+'\'); return false;">Back</button><div class="clear"></div></div>'),$smh("#smh-register-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),register_validator=$smh("#smh-register-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{fname:{required:!0},lname:{required:!0},email:{required:!0,email:!0},registerPass:{required:!0,mypassword:!0,minlength:5},registerPass2:{required:!0,minlength:5,equalTo:"#smh-register-pass"}},messages:{fname:{required:"Please enter a first name"},lname:{required:"Please enter a last name"},email:{required:"Please enter a email",email:"Please enter a valid email"},registerPass:{required:"Please enter a password",minlength:"Your password must be at least 5 characters long"},registerPass2:{required:"Please enter a password",minlength:"Your password must be at least 5 characters long",equalTo:"Passwords do not match"}}}),$smh("#smh-login-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),login_validator=$smh("#smh-login-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{username:{required:!0,email:!0},pass:{required:!0}},messages:{username:{required:"Please enter a email",email:"Please enter a valid email"},pass:{required:"Please enter a password"}}})},register:function(){var t=jstz.determine(),e=t.name(),i=register_validator.form(),s=this.getConfig("pid"),o=this.getConfig("sm_ak"),a=window.location.href;if(i){var d=$smh("#smh-fname").val(),n=$smh("#smh-lname").val(),r=$smh("#smh-email").val(),l=$smh("#smh-register-pass").val(),p={pid:s,sm_ak:o,fname:d,lname:n,email:r,pass:l,tz:e,url:ppv_obj.base64_encode(a)};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=register_account",data:p,dataType:"json",beforeSend:function(){$smh("#register-loading").html('<img width="20px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading.gif">')}}).done(function(t){t.success?ppv_obj.activateForm(r):($smh("#register-fail").html("User already exists. Please try again."),$smh("#register-fail").css({color:"rgb(220, 31, 33)","font-size":"12px","background-color":"rgb(254, 238, 238)",border:"1px solid rgb(208, 16, 27)","margin-top":"9px","margin-bottom":"9px"}),$smh("#register-loading").empty())})}},activateForm:function(t){$smh(".modal-dialog").css("width","400px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipActivate();" class="close" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Activate</h4><div class="clear"></div></div><div class="modal-body"><div id="ticket-instructions"><div class="alert alert-success">Thank you for registering! A confirmation email has been sent to <strong>'+t+"</strong>.<br><br> Please click on the activation link in the email to activate your account. If you did not receive an email, please check your spam.</div><br></div>")},activate:function(t){var e=activate_validator.form(),i=jstz.determine(),s=i.name(),o=this.getConfig("pid"),a=this.getConfig("sm_ak");if(e){var d=$smh.trim($smh("#akey").val()),n={pid:o,sm_ak:a,akey:d,tz:s,email:t};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=activate_account",data:n,dataType:"json",beforeSend:function(){$smh("#activate-loading").html('<img width="20px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading.gif">')}}).done(function(t){t.success?($smh(".modal-dialog").css("width","400px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Activate</h4><div class="clear"></div></div><div class="modal-body"><div id="ticket-instructions"><div class="alert alert-success">Activation was successful! Click on <strong>continue</strong> to complete your purchase.</div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.confirm(); return false;">Continue</button></div>'),$smh.cookie("smh_auth_key",t.auth_key),window.smh_ppv_order.userId=t.user_id,userId=t.user_id,is_logged_in=!0):($smh("#ticket-instructions").html('<div style="height: 30px; text-align: center; width: 100%; vertical-align: middle; padding-top: 5px; background-color: rgb(254, 238, 238); border: 1px solid rgb(208, 16, 27); color: rgb(220, 31, 33); font-weight: bold; margin-bottom: 5px;">Activation failed. Please try again.</div>'),$smh("#ticket-instructions").css("float","none"),$smh("#activate-loading").empty())})}},confirm:function(){var t=this.getConfig("type"),e=this.getConfig("entryId"),i={pid:this.getConfig("pid"),sm_ak:this.getConfig("sm_ak"),entryId:e,ticket_id:window.smh_ppv_order.ticket,type:t,protocol:protocol};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_confirm",data:i,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(t){t.success?$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Confirm</h4><div class="clear"></div></div><div class="modal-body">'+t.content+'</div><div class="modal-footer"><button type="button" class="btn btn-default" style="margin-right: 10px;" onclick="ppv_obj.smh_back_loggedin(\''+e+'\'); return false;">Back</button><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.pay();">Confirm and Pay</button></div>'):$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Error</h4><div class="clear"></div></div><div class="modal-body"><div style="height: 55px; margin-top: 30px; width: 291px; margin-left: auto; margin-right: auto;">Something went wrong. Please try again later.</div></div>')})},loggedin_confirm:function(t,e,i,s){window.smh_ppv_order.entry=e,window.smh_ppv_order.ticket=t,window.smh_ppv_order.type=i,window.smh_ppv_order.bill_per=s;var o=this.getConfig("entryId"),a={pid:this.getConfig("pid"),sm_ak:this.getConfig("sm_ak"),entryId:o,ticket_id:window.smh_ppv_order.ticket,type:this.getConfig("type"),protocol:protocol};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_confirm",data:a,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(t){t.success?$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Confirm</h4><div class="clear"></div></div><div class="modal-body">'+t.content+'</div><div class="modal-footer"><button type="button" class="btn btn-default" style="margin-right: 10px;" onclick="ppv_obj.smh_back_loggedin(\''+o+'\'); return false;">Back</button><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.pay();">Confirm and Pay</button></div>'):$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Error</h4><div class="clear"></div></div><div class="modal-body"><div style="height: 55px; margin-top: 30px; width: 291px; margin-left: auto; margin-right: auto;">Something went wrong. Please try again later.</div></div>')})},pay:function(){var t=jstz.determine(),e=t.name(),i={pid:this.getConfig("pid"),sm_ak:this.getConfig("sm_ak"),entry_id:window.smh_ppv_order.entry,user_id:window.smh_ppv_order.userId,ticket_id:window.smh_ppv_order.ticket,tz:e};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=add_order",data:i,dataType:"json",beforeSend:function(){var t=kWidget.isMobileDevice(),e="";t&&(e='<div style="font-size: 18px; font-weight: bold;">Please wait while we redirect you to PayPal..</div>'),$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif">'+e+"</div>")}}).done(function(t){t.success&&ppv_obj.paypal(t.order_id,t.sub_id)})},paypal:function(t,e){var i=jstz.determine(),s=window.smh_ppv_order.userId,o=window.smh_ppv_order.entry,a=window.smh_ppv_order.ticket,d=window.smh_ppv_order.type,n=window.smh_ppv_order.bill_per,r=this.getConfig("entryId"),l=this.getConfig("type"),p=this.getConfig("pid"),m=this.getConfig("sm_ak"),c=kWidget.isMobileDevice(),h=window.location.href;window.pptransact.init(protocol,c),window.pptransact.bill({userId:s,entryId:o,ticketId:a,ticket_type:d,bill_per:n,kentry:r,orderId:t,subId:e,itemQty:"1",pid:p,sm_ak:m,type:l,protocol:protocol,url:h,tz:i.name(),successCallback:function(e){var i=jstz.determine(),n=i.name(),c={pid:p,sm_ak:m,entry_id:o,user_id:s,ticket_id:a,ticket_type:d,order_id:t,tz:n,type:l,media_type:media_type,smh_aff:smh_aff,payment_status:e.paymentStatus};"Completed"==e.paymentStatus?$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=complete_order",data:c,dataType:"json"}).done(function(t){t.success?e.thank_you?ppv_obj.redirect(protocol+"://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/php/thankyou.php?redirect_url="+ppv_obj.base64_encode(h)):ppv_obj.checkUserInventory(p,m,s,r,l,!1):$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Error</h4><div class="clear"></div></div><div class="modal-body"><div style="height: 55px; margin-top: 30px; width: 291px; margin-left: auto; margin-right: auto;">Something went wrong. Please contact the website administrator.</div></div>')}):$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=finish_order",data:c,dataType:"json"}).done(function(t){t.success?$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Confirm</h4><div class="clear"></div></div><div class="modal-body"><div style="height: 87px; margin-top: 30px; width: 420px; margin-left: auto; margin-right: auto; text-align: center;"><strong>Notice: </strong>Your payment was not completed.<br>The following payment status was returned: <strong>'+t.status+"</strong><br>You will receive an email once the payment status changes to <strong>completed</strong>.</div></div>"):$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Error</h4><div class="clear"></div></div><div class="modal-body"><div style="height: 55px; margin-top: 30px; width: 291px; margin-left: auto; margin-right: auto;">Something went wrong. Please contact the website administrator.</div></div>')})},failCallback:function(t){$smh("#smh_purchase_window").modal("hide")}})},redirect:function(t){var e=navigator.userAgent.toLowerCase(),i=-1!==e.indexOf("msie"),s=parseInt(e.substr(4,2),10);if(i&&9>s){var o=document.createElement("a");o.href=t,document.body.appendChild(o),o.click()}else window.location.href=t},base64_encode:function(t){var e,i,s,o,a,d,n,r,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=0,m=0,c="",h=[];if(!t)return t;do e=t.charCodeAt(p++),i=t.charCodeAt(p++),s=t.charCodeAt(p++),r=e<<16|i<<8|s,o=r>>18&63,a=r>>12&63,d=r>>6&63,n=63&r,h[m++]=l.charAt(o)+l.charAt(a)+l.charAt(d)+l.charAt(n);while(p<t.length);c=h.join("");var g=t.length%3;return(g?c.slice(0,g-3):c)+"===".slice(g||3)},showLoggedInPurchaseWindow:function(){kdp.sendNotification("doPause");var t,e=this.getConfig("pid"),i=this.getConfig("sm_ak"),s=this.getConfig("entryId"),o=this.getConfig("type");t={pid:e,sm_ak:i,entryId:s,type:o,protocol:protocol,logged_in:is_logged_in},$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_tickets",data:t,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(t){if(t.success)if(t.content.success){window.smh_ppv_order.userId=userId;var o={uid:userId,pid:e,sm_ak:i};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_user_name",data:o,dataType:"json"}).done(function(e){refresh_player=!0,is_logged_in=!0,$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4>'+t.content.title+'</h4><div class="clear"></div></div><div class="modal-body"><div id="entry-wrapper"><div id="entry-thumb">'+t.content.thumb+'</div></div><div id="ticket-wrapper">'+t.content.tickets+'</div><div class="clear"></div><div id="entry-desc">'+t.content.desc+'</div><div class="clear"></div></div><div class="modal-footer"><div id="ticket-login"><span id="smh-user" style="color: #666; font-size: 13px;">Welcome, '+e+'<button style="width: 99px; margin-left: 20px;" onclick="ppv_obj.smhLogout(\''+s+'\');" class="btn btn-default" type="button">Log out</button></span></div></div>')})}else $smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(t.content.content);else $smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(t.content)})},showCurrentTime:function(t,e){current_time=t},login_form:function(t){$smh(".modal-dialog").css("width","435px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipLogin();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Login</h4><div class="clear"></div></div><div class="modal-body"><form id="smh-login-form" action=""><div id="login-fail"></div><div id="ticket-login-table"><div class="ticket-login-table-row"><input type="text" name="username" id="smh-username" placeholder="Email" /></div><div class="ticket-login-table-row"><input type="password" name="pass" id="smh-pass" placeholder="Password" /></div><div class="ticket-login-table-row"><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="login-loading"></span></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" id="back" onclick="ppv_obj.smh_back(\''+t+'\'); return false;">Back</button><button type="button" class="btn btn-danger" style="font-size: 11px; margin-left: 5px;" id="signin" onclick="ppv_obj.smhLogin(false); return false;">Login</button><div id="pass_rec" style="float: right; margin-right: 15px; margin-top: 7px;"><a href="#" onclick="ppv_obj.smh_login_password_form(\''+t+'\'); return false;">Forgot Password?</a></div><div class="clear"></div></div>'),$smh("#smh-login-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),login_validator=$smh("#smh-login-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{username:{required:!0,email:!0},pass:{required:!0}},messages:{username:{required:"Please enter a email",email:"Please enter a valid email"},pass:{required:"Please enter a password"}}})},login_form_button:function(t){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","435px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipLogin();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title">Login</h4><div class="clear"></div></div><div class="modal-body"><form id="smh-login-form" action=""><div id="login-fail"></div><div id="ticket-login-table"><div class="ticket-login-table-row"><input type="text" name="username" id="smh-username" placeholder="Email" /></div><div class="ticket-login-table-row"><input type="password" name="pass" id="smh-pass" placeholder="Password" /></div><div class="ticket-login-table-row"><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="login-loading"></span></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-danger" id="signin" onclick="ppv_obj.smhLogin(false); return false;">Login</button><div id="pass_rec" style="float: right; margin-right: 15px; margin-top: 7px;"><a href="#" onclick="ppv_obj.smh_password_form_button(\''+t+'\'); return false;">Forgot Password?</a></div><div class="clear"></div></div>'),$smh("#smh-login-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),login_validator=$smh("#smh-login-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{username:{required:!0,email:!0},pass:{required:!0}},messages:{username:{required:"Please enter a email",email:"Please enter a valid email"},pass:{required:"Please enter a password"}}})},smhLogin:function(t){var e=this.getConfig("pid"),i=this.getConfig("sm_ak"),s=this.getConfig("entryId"),o=this.getConfig("type"),a=login_validator.form();if(a){var d=$smh("#smh-username").val(),n=$smh("#smh-pass").val(),r={pid:this.getConfig("pid"),sm_ak:i,un:d,pswd:n};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=login_user",data:r,dataType:"json",beforeSend:function(){$smh("#login-loading").html('<img width="20px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading.gif">')}}).done(function(a){a.success?(is_logged_in=!0,$smh("#login-loading").empty(),$smh.cookie("smh_auth_key",a.auth_key),window.smh_ppv_order.userId=a.user_id,userId=a.user_id,ppv_obj.checkUserInventory(e,i,a.user_id,s,o,t),active_interval_set||(window.ppv.isActive(e,i),is_active=setInterval(function(){window.ppv.isActive(e,i)},6e5),active_interval_set=!0)):a.success||(a.au?($smh("#login-fail").html("Error: user is currently active"),$smh("#login-fail").css({color:"rgb(220, 31, 33)","font-size":"12px","background-color":"rgb(254, 238, 238)",border:"1px solid rgb(208, 16, 27)"}),$smh("#login-loading").empty()):($smh("#login-fail").html("Invalid username or password."),$smh("#login-fail").css({color:"rgb(220, 31, 33)","font-size":"12px","background-color":"rgb(254, 238, 238)",border:"1px solid rgb(208, 16, 27)"}),$smh("#login-loading").empty()))})}},smhLogout:function(t){var e=this.getConfig("pid"),i=this.getConfig("sm_ak"),s=this.getConfig("uiConfId"),o=this.getConfig("uiConf_width"),a=this.getConfig("uiConf_height"),d=this.getConfig("type");$smh.removeCookie("smh_auth_key"),$smh("#smh_purchase_window").modal("hide"),is_logged_in=!1,refresh_player=!1,window.ppv.loadVideo("",e,i,s,o,a,t,d),window.ppv.isNotActive(e,i)},smh_login_password_form:function(t){$smh(".modal-dialog").css("width","370px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipPass();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title passrecov">Password Recovery</h4><div class="clear"></div></div><div class="modal-body"><div style="font-size: 12px; text-align: center; height: 30px; color: rgb(146, 151, 145);">Please enter the email address used to register below.</div><form id="smh-password-form" action=""><div id="pass-fail"></div><table id="pass-table" cellspacing="5" cellpadding="5" border="0"><tr><td><input type="text" name="email" id="smh-email" placeholder="Email" /></td></tr><tr><td><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="loading"></span></div></td></tr></table></form></div><div class="modal-footer"><button type="button" class="btn btn-default" style="margin-right: 10px;" onclick="ppv_obj.login_form(\''+t+'\'); return false;">Back</button><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.pass_reset_form(\''+t+"'); return false;\">Submit</button></div>"),$smh("#smh-password-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),pass_validator=$smh("#smh-password-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{email:{required:!0,email:!0}},messages:{email:{required:"Please enter a email",email:"Please enter a valid email"}}})},smh_register_login_password_form:function(t,e,i,s,o){$smh(".modal-dialog").css("width","370px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipPass();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title passrecov">Password Recovery</h4><div class="clear"></div></div><div class="modal-body"><div style="font-size: 12px; text-align: center; height: 30px; color: rgb(146, 151, 145);">Please enter the email address used to register below.</div><form id="smh-password-form" action=""><div id="pass-fail"></div><table id="pass-table" cellspacing="5" cellpadding="5" border="0"><tr><td><input type="text" name="email" id="smh-email" placeholder="Email" /></td></tr><tr><td><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="reset-loading"></span></div></td></tr></table></form></div><div class="modal-footer"><button type="button" class="btn btn-default" style="margin-right: 10px;" onclick="ppv_obj.register_loggin('+t+","+e+",'"+i+"','"+s+"','"+o+'\'); return false;">Back</button><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.pass_reset_form(\''+o+"'); return false;\">Submit</button></div>"),$smh("#smh-password-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),pass_validator=$smh("#smh-password-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{email:{required:!0,email:!0}},messages:{email:{required:"Please enter a email",email:"Please enter a valid email"}}})},smh_password_form_button:function(t){$smh(".modal-dialog").css("width","370px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipPass();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title passrecov">Password Recovery</h4><div class="clear"></div></div><div class="modal-body"><div style="font-size: 12px; text-align: center; height: 30px; color: rgb(146, 151, 145);">Please enter the email address used to register below.</div><form id="smh-password-form" action=""><div id="pass-fail"></div><table id="pass-table" cellspacing="5" cellpadding="5" border="0"><tr><td><input type="text" name="email" id="smh-email" placeholder="Email" /></td></tr><tr><td><div style="text-align: center;"><span style="margin-right: 20px; display: block; height: 20px;" id="reset-loading"></span></div></td></tr></table></form></div><div class="modal-footer"><button type="button" class="btn btn-default" style="margin-right: 10px;" onclick="ppv_obj.login_form_button(\''+t+'\'); return false;">Back</button><button type="button" class="btn btn-primary" style="font-size: 11px;" onclick="ppv_obj.pass_reset_form(\''+t+"'); return false;\">Submit</button></div>"),$smh("#smh-password-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),pass_validator=$smh("#smh-password-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{email:{required:!0,email:!0}},messages:{email:{required:"Please enter your email",email:"Please enter a valid email"}}})},pass_reset_form:function(t){var e=pass_validator.form();if(e){var i=$smh("#smh-email").val(),s=this.getConfig("sm_ak"),o={pid:this.getConfig("pid"),sm_ak:s,email:i};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=reset_request",data:o,dataType:"json",beforeSend:function(){$smh("#reset-loading").html('<img width="20px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading.gif">')}}).done(function(e){e.success?($smh(".modal-dialog").css("width","400px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh();ppv_obj.destroyToolTipPass();" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title passrecov">Password Recovery</h4><div class="clear"></div></div><div class="modal-body"><div id="ticket-instructions"><div class="alert alert-success">Your password reset request has been submitted. An email has been sent to <strong>'+i+'</strong> with your reset token. Please enter your new password and the reset token below.</div></div><form id="smh-password-form" action=""><div id="reset-table"><div class="reset-table-row"><input type="password" placeholder="New Password" id="smh-pass" name="pass" class="tooltipstered"></div><div class="reset-table-row"><input type="password" placeholder="Confirm New Password" id="smh-pass2" name="pass2" class="tooltipstered"></div><div class="reset-table-row"><input type="text" placeholder="Reset Token" id="reset_token" name="reset_token" class="tooltipstered"></div><div class="reset-table-row"><div style="text-align: center;"><span id="reset-loading" style="margin-right: 20px; display: block; height: 20px;"></span></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-primary" onclick="ppv_obj.pass_reset(\''+i+"','"+t+"'); return false;\">Reset</button></div>"),$smh("#smh-password-form input").tooltipster({trigger:"custom",onlyOne:!1,position:"right"}),reset_pass_validator=$smh("#smh-password-form").validate({highlight:function(t,e){$smh(t).removeClass("valid").removeClass("error").addClass("validate-error")},unhighlight:function(t,e){$smh(t).removeClass("valid").removeClass("validate-error")},errorPlacement:function(t,e){$smh(e).tooltipster("update",$smh(t).text()),$smh(e).tooltipster("show")},success:function(t,e){$smh(e).tooltipster("hide")},rules:{reset_token:{required:!0},pass:{required:!0,mypassword:!0,minlength:5},pass2:{required:!0,minlength:5,equalTo:"#smh-pass"}},messages:{reset_token:{required:"Please enter your reset token"},pass:{required:"Please enter a password",minlength:"Your password must be at least 5 characters long"},pass2:{required:"Please enter a password",minlength:"Your password must be at least 5 characters long",equalTo:"Passwords do not match"}}})):($smh("#pass-fail").html('<div style="height: 30px; text-align: center; width: 100%; vertical-align: middle; padding-top: 5px; background-color: rgb(254, 238, 238); border: 1px solid rgb(208, 16, 27); color: rgb(220, 31, 33); font-weight: bold; margin-bottom: 5px;">There is no account registered to this e-mail address</div>'),$smh("#pass-fail").css("float","none"),$smh("#reset-loading").empty())})}},pass_reset:function(t,e){var i=reset_pass_validator.form();if(i){var s=$smh("#smh-pass").val(),o=$smh.trim($smh("#reset_token").val()),a=this.getConfig("sm_ak"),d={pid:this.getConfig("pid"),sm_ak:a,email:t,reset_token:o,pass:s};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=reset_pass",data:d,dataType:"json",beforeSend:function(){$smh("#reset-loading").html('<img width="20px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading.gif">')}}).done(function(t){t.success?($smh(".modal-dialog").css("width","400px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4 class="modal-title passrecov">Password Recovery</h4><div class="clear"></div></div><div class="modal-body"><div id="ticket-instructions"><div class="alert alert-success">Your password was successfully reset! Log in below.</div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" onclick="ppv_obj.login_form(\''+e+"'); return false;\">Login</button></div>")):($smh("#ticket-instructions").html('<div style="height: 30px; text-align: center; width: 100%; vertical-align: middle; padding-top: 5px; background-color: rgb(254, 238, 238); border: 1px solid rgb(208, 16, 27); color: rgb(220, 31, 33); font-weight: bold; margin-bottom: 5px;">Invalid token. Please try again.</div>'),$smh("#ticket-instructions").css("float","none"),$smh("#reset-loading").empty())})}},checkUserInventory:function(t,e,i,s,o,a){var d=jstz.determine(),n=this.getConfig("uiConfId"),r=this.getConfig("uiConf_width"),l=this.getConfig("uiConf_height"),p={entryId:s,uid:i,pid:t,sm_ak:e,type:o,tz:d.name()};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=check_inventory",data:p,dataType:"json"}).done(function(d){if(d)paid=!0,$smh("#purchaseWindow").css("display","none"),kdp.addJsListener("playerPlayed","playerPlayedHandler"),is_logged_in=!0,userId=i,$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>'),playlist||category||(kdp.setKDPAttribute("servicesProxy.kalturaClient","ks",d),kdp.sendNotification("cleanMedia"),kdp.sendNotification("changeMedia",{entryId:s}),livestream||(kdp.addJsListener("playerSeekEnd","onDoSeek"),setTimeout(function(){kdp.sendNotification("doSeek",current_time)},2e3))),setTimeout(function(){refresh_player=!1,playlist||category?(playlist||category)&&(init_loaded=!1,window.ppv.loadVideo(d,t,e,n,r,l,s,o)):kdp.sendNotification("doPlay"),$smh("#smh_purchase_window").modal("hide")},5e3);else if(a)ppv_obj.confirm();else{var p={uid:i,pid:t,sm_ak:e};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_user_name",data:p,dataType:"json"}).done(function(a){var d={pid:t,sm_ak:e,entryId:s,type:o,protocol:protocol,logged_in:is_logged_in};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_tickets",data:d,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(t){t.success?t.content.success?($smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4>'+t.content.title+'</h4><div class="clear"></div></div><div class="modal-body"><div id="entry-wrapper"><div id="entry-thumb">'+t.content.thumb+'</div></div><div id="ticket-wrapper">'+t.content.tickets+'</div><div class="clear"></div><div id="entry-desc">'+t.content.desc+'</div><div class="clear"></div></div><div class="modal-footer"><div id="ticket-login"><span id="smh-user" style="color: #666; font-size: 13px;">Welcome, '+a+'<button style="width: 99px; margin-left: 20px;" onclick="ppv_obj.smhLogout(\''+s+'\');" class="btn btn-default" type="button">Logout</button></span></div></div>'),userId=i,refresh_player=!0):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(t.content.content)):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(t.content))})})}})},smh_back:function(t){var e={pid:this.getConfig("pid"),sm_ak:this.getConfig("sm_ak"),type:this.getConfig("type"),entryId:t,protocol:protocol,logged_in:is_logged_in};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_tickets",data:e,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(e){e.success?e.content.success?($smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4>'+e.content.title+'</h4><div class="clear"></div></div><div class="modal-body"><div id="entry-wrapper"><div id="entry-thumb">'+e.content.thumb+'</div></div><div id="ticket-wrapper">'+e.content.tickets+'</div><div class="clear"></div><div id="entry-desc">'+e.content.desc+'</div><div class="clear"></div></div><div class="modal-footer"><button style="font-size: 12px; width: 140px;" onclick="ppv_obj.login_form(\''+t+'\');" class="btn btn-default" type="button">Already purchased?</button></div>')):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(e.content.content)):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(e.content))})},smh_back_loggedin:function(t){var e=this.getConfig("pid"),i=this.getConfig("sm_ak"),s={uid:userId,pid:e,sm_ak:i};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_user_name",data:s,dataType:"json"}).done(function(s){var o={pid:e,sm_ak:i,type:ppv_obj.getConfig("type"),entryId:t,protocol:protocol,logged_in:is_logged_in};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=get_tickets",data:o,dataType:"json",beforeSend:function(){$smh("#smh_purchase_window").modal({backdrop:"static"}),$smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div id="ppv-loading"><img width="200px" src="'+protocol+'://mediaplatform.streamingmediahosting.com/html5/html5lib/v2.35/kWidget/onPagePlugins/ppv/resources/img/loading_icon.gif"></div>')}}).done(function(e){e.success?e.content.success?($smh(".modal-dialog").css("width","515px"),$smh(".modal-content").html('<div class="modal-header"><button aria-label="Close" data-dismiss="modal" class="close" onclick="ppv_obj.refresh()" type="button"><span aria-hidden="true">x</span></button><h4>'+e.content.title+'</h4><div class="clear"></div></div><div class="modal-body"><div id="entry-wrapper"><div id="entry-thumb">'+e.content.thumb+'</div></div><div id="ticket-wrapper">'+e.content.tickets+'</div><div class="clear"></div><div id="entry-desc">'+e.content.desc+'</div><div class="clear"></div></div><div class="modal-footer"><div id="ticket-login"><span id="smh-user" style="color: #666; font-size: 13px;">Welcome, '+s+'<button style="width: 99px; margin-left: 20px;" onclick="ppv_obj.smhLogout(\''+t+'\');" class="btn btn-default" type="button">Logout</button></span></div></div>')):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(e.content.content)):($smh(".modal-dialog").css("width","600px"),$smh(".modal-content").html(e.content))})})},updateView:function(){var t={pid:this.getConfig("pid"),sm_ak:this.getConfig("sm_ak"),entryId:this.getConfig("entryId"),uid:userId};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=update_user_views",data:t,dataType:"json"})},getClipListTarget:function(){if($smh("#"+i).length)return $smh("#"+i);var e=ppv_obj.getConfig("clipListTargetId");if("null"==e&&(e=null),e&&$smh("#"+e).length)return $smh("#"+e);var s=ppv_obj.getConfig("layoutMode");return"top"==s?$smh("<div />").attr("id",i).insertBefore($smh("#"+t)):$smh("<div />").attr("id",i).insertAfter($smh("#"+t))},activateEntry:function(t){var e=ppv_obj.getClipListTarget().find(".k-carousel"),i=ppv_obj.getClipListTarget().find("ul li");i.length&&t&&i.each(function(i,s){var o=$smh(s).data("entryMeta"),a=o;a==t?($smh(s).addClass("k-active").data("activeEntry",!0),(0==i||ppv_obj.getClipListTarget().find("ul").width()>ppv_obj.getClipListTarget().width())&&e[0].jCarouselLiteGo(i)):$smh(s).removeClass("k-active").data("activeEntry",!1)})},loadCat:function(){kdp.kBind("changeMedia.onPagePlaylist",function(t){ppv_obj.activateEntry(t.entryId)}),kdp.kBind("mediaReady",function(){var t=ppv_obj.getConfig("pid"),i=ppv_obj.getConfig("sm_ak");if(!e){var s=ppv_obj.getConfig("clipListTargetId");"null"==s&&(s=null),e=!0,$clipListTarget=ppv_obj.getClipListTarget(),$clipListTarget.addClass("kWidget-clip-list");var o=ppv_obj.getConfig("layoutMode")||"right";$clipListTarget.addClass("k-"+o);var a=ppv_obj.getConfig("thumbWidth")||"110",d=.75*a,n=null,r={},l="left"==o,p="right"==o,m="bottom"==o,c="top"==o;p?(s||($smh(kdp).css("float","left"),$clipListTarget.css({"float":"left","padding-left":"5px",height:$smh(kdp).height()+"px",width:$smh(kdp).width()+"px"})),n=Math.floor($clipListTarget.height()/(parseInt(d)+4)),r={width:"100%",height:d}):l?(s||($smh(kdp).css("float","right"),$clipListTarget.css({"float":"right","padding-right":"5px",height:$smh(kdp).height()+"px",width:$smh(kdp).width()+"px"})),n=Math.floor($clipListTarget.height()/(parseInt(d)+4)),r={width:"100%",height:d}):c?(s||$clipListTarget.css({"margin-bottom":"5px",width:$smh(kdp).width()+"px",height:d}),n=Math.floor($clipListTarget.width()/(parseInt(a)+4)),r={width:a,height:d}):m&&(s||$clipListTarget.css({"padding-top":"5px",width:$smh(kdp).width()+"px",height:d}),n=Math.floor($clipListTarget.width()/(parseInt(a)+4)),r={width:a,height:d});var h=$smh("<ul>").css({height:"100%"}).appendTo($clipListTarget).wrap($smh("<div />").addClass("k-carousel"));init_clip=!1;var g="";$smh.each(cat_entries,function(e,s){init_clip||(g=s.entry_id,init_clip=!0),h.append($smh("<li />").css(r).data({entryMeta:s.entry_id,index:e}).append($smh("<img />").attr({src:protocol+"://mediaplatform.streamingmediahosting.com/p/"+t+"/thumbnail/entry_id/"+s.entry_id+"/width/"+a}),$smh("<div />").addClass("k-clip-desc").append($smh("<h3 />").addClass("k-title").text(s.name),$smh("<p />").addClass("k-description").text(null==s.desc?"":s.desc))).click(function(){ppv_obj.checkCatInvetory(t,i,userId,s.entry_id)}).hover(function(){$smh(this).addClass("k-active")},function(){$smh(this).data("activeEntry")||$smh(this).removeClass("k-active")}))}),$clipListTarget.prepend($smh("<a />").addClass("k-scroll k-prev")),$clipListTarget.append($smh("<a />").addClass("k-scroll k-next")),n>cat_entries.length&&(n=cat_entries.length);var v=!1;(l||p)&&(v=!0),$clipListTarget.find(".k-carousel").jCarouselLite({btnNext:".k-next",btnPrev:".k-prev",visible:n,mouseWheel:!0,circular:!1,vertical:v}),!v&&$clipListTarget.find(".k-carousel").width()>$clipListTarget.width()-40&&$clipListTarget.find(".k-carousel").css("width",$clipListTarget.width()-40),h.find("li").sortElements(function(t,e){return $smh(t).data("index")>$smh(e).data("index")?1:-1}),ppv_obj.activateEntry(g)}})},checkCatInvetory:function(t,e,i,s){kdp.sendNotification("doPause");var o={entryId:s,pid:t,sm_ak:e,access:paid};$smh.ajax({type:"GET",url:protocol+"://mediaplatform.streamingmediahosting.com/apps/ppv/v1.0/index.php?action=check_cat_inventory",data:o,dataType:"json"}).done(function(t){t?(kdp.setKDPAttribute("servicesProxy.kalturaClient","ks",t),kdp.sendNotification("changeMedia",{entryId:s}),paid=!0):kdp.sendNotification("changeMedia",{entryId:s})})},normalizeAttrValue:function(t){switch(t){case"null":return null;case"true":return!0;case"false":return!1}return t},getAttr:function(t){return this.normalizeAttrValue(kdp.evaluate("{"+t+"}"))},getConfig:function(t){return this.getAttr(this.pluginName+"."+t)},destroyToolTipRegisterLogin:function(){$smh("#smh-register-form input").tooltipster("destroy"),$smh("#smh-login-form input").tooltipster("destroy")},destroyToolTipLogin:function(){$smh("#smh-login-form input").tooltipster("destroy")},destroyToolTipPass:function(){$smh("#smh-password-form input").tooltipster("destroy")},destroyToolTipActivate:function(){$smh("#smh-activation-form input").tooltipster("destroy")},refresh:function(){var t=ppv_obj.getConfig("pid"),e=ppv_obj.getConfig("entryId"),i=ppv_obj.getConfig("type"),s=ppv_obj.getConfig("sm_ak"),o=ppv_obj.getConfig("uiConfId"),a=ppv_obj.getConfig("uiConf_width"),d=ppv_obj.getConfig("uiConf_height");refresh_player&&window.ppv.checkAccess(t,s,o,a,d,e,i)}},window.freePreviewEndHandler=function(){is_logged_in?ppv_obj.showLoggedInPurchaseWindow():ppv_obj.showPurchaseWindow()},window.playerUpdatePlayheadHandler=function(t,e){ppv_obj.showCurrentTime(t,e)},window.onDoSeek=function(){kdp.sendNotification("doPlay"),setTimeout(function(){kdp.sendNotification("doPlay")},1e3)},window.playerPlayedHandler=function(){is_logged_in&&!init_loaded&&(init_loaded=!0,ppv_obj.updateView())},window.purchaseHandler=function(){is_logged_in?ppv_obj.showLoggedInPurchaseWindow():ppv_obj.showPurchaseWindow()},window.loginHandler=function(){ppv_obj.login_form_button(login_entryid)},ppv_obj=new s(kdp)}),init_loaded||window.$smh("body").append('<div class="modal fade" id="smh_purchase_window" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"></div></div></div>');